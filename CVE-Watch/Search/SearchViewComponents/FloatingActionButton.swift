//
//  FloatingActionButton.swift
//  CVE-Watch
//
//  Created by Niklas Demel on 22.01.24.
//

import SwiftUI

struct FloatingActionButton: View {
    @State private var isActionButtonVisible = true
    @ObservedObject var vm : SearchVM
    @Binding var userInput: String
    @Binding var searchtype: Searchtype
    @Binding var startDate: Date
    @Binding var endDate: Date

    var body: some View {
            if isActionButtonVisible {
                VStack {
                    Spacer()
                    HStack {
                        Spacer()
                        
                        Button(action: {
                            print(userInput)
                            vm.cves = []
                            if(searchtype != .Date) {
                                vm.fetch(userInput: userInput, searchtypte: searchtype)
                            } else {
                                vm.fetch(searchtype: searchtype, startDate: startDate, endDate: endDate)
                            }
                        }) {
                            Image(systemName: "magnifyingglass")
                                .font(.title)
                                .padding()
                                .background(Color.accentColor)
                                .foregroundColor(.white)
                                .clipShape(Circle())
                        }
                        .padding(.trailing, 16)
                        .padding(.bottom, 16)
                    }
                }.onAppear {
                    isActionButtonVisible = true
                }
            }
        }
    
}

#Preview {
    FloatingActionButton(vm: SearchVM(),userInput: .constant("bob"),searchtype:.constant(Searchtype.CVEid),startDate: .constant(Date()),endDate: .constant(Date()))
}
