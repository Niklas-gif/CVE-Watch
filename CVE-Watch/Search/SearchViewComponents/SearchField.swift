//
//  SearchField.swift
//  CVE-Watch
//
//  Created by Niklas Demel on 31.01.24.
//

import SwiftUI

struct SearchField: View {
    @Environment(\.dismissSearch) private var dismissSearch
    var vm: SearchVM
    @Binding var searchText: String
    @Binding var searchSetting: Searchtype
    @Binding var placeholder: String
    
    var body: some View {
        TextField(placeholder, text: $searchText)
            .textFieldStyle(.roundedBorder)
            .padding()
            .onSubmit {
                print(searchText)
                vm.cves = []
                vm.fetch(userInput: searchText, searchtypte: searchSetting)
                
            }
            .onChange(of: searchSetting, {searchText = ""})
            .onDisappear {
                dismissSearch()
            }
    }
}
