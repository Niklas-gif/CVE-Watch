//
//  DateRangPickerView.swift
//  CVE-Watch
//
//  Created by Niklas Demel on 01.02.24.
//

import SwiftUI

struct DateRangePickerView: View {
    @Binding var startDate : Date
    @Binding var endDate : Date
    @Binding var invalidDays : Int
    @State var showWarning = true
    
    var body: some View {
        
        VStack {
            if showWarning {
                    Text("The Range of days must be between 1 and 31 'Including' ").padding()
            }
            HStack {
                VStack {
                    Text("Start Date:")
                    DatePicker("", selection: $startDate, in: ...Date(), displayedComponents: .date)
                        .datePickerStyle(.compact)
                        .labelsHidden()
                }
                Spacer()
                VStack {
                    Text("End Date:")
                    DatePicker("", selection: $endDate, in: ...Date(), displayedComponents: .date)
                        .datePickerStyle(.compact)
                        .labelsHidden()
                }
            }
            .padding()
        }.onChange(of: invalidDays, {
            if invalidDays > 0 && invalidDays < 32 {
                showWarning = false
            } else {
                showWarning = true
            }
        })
    }
}


#Preview {
    DateRangePickerView(startDate: .constant(Date()), endDate: .constant(Date()),invalidDays: .constant(32))
}
