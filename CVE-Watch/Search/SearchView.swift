//
//  SearchView.swift
//  CVE-Watch
//
//  Created by Niklas Demel on 04.12.23.
//

import SwiftUI



struct SearchView: View {
    @ObservedObject var vm = SearchVM()
    @State var searchText = ""
    @State var isSelected = false
    @State var searchSetting = Searchtype.CVEid
    
    var body: some View {
        NavigationStack {
            ZStack{
                Color.cveBackground.ignoresSafeArea()
                VStack {
                    /*TextField(
                        "CVE-Search", text: $searchText
                    )
                    .textFieldStyle(.roundedBorder)
                    .padding()*/
                    ScrollView(.horizontal) {
                        HStack(alignment: .center,spacing: 10) {
                            Group {
                                Button(action: {
                                    searchSetting = Searchtype.CVEid
                                }, label: {
                                    HStack {
                                        Text("ID")
                                        Image(systemName: "tray.circle")
                                    }
                                }
                                ).foregroundStyle(searchSetting == .CVEid ? Color.accentColor : Color.white)
                                //.foregroundStyle(searchSetting == .CVEid ? .green : .white)
                                Button(action: {
                                    searchSetting = Searchtype.Keyword
                                }, label: {
                                    HStack {
                                        Text("Description")
                                        Image(systemName: "info.bubble")
                                    }
                                }
                                ).foregroundStyle(searchSetting == .Keyword ? Color.accentColor : Color.white)
                                Button (action: {
                                    searchSetting = Searchtype.Date
                                }, label: {
                                    HStack {
                                        Text("Date")
                                        Image(systemName: "calendar")
                                    }
                                }
                                ).foregroundStyle(searchSetting == .Date ? Color.accentColor : Color.white)
                                //Toggle("Toggle",isOn: $isSelected).toggleStyle(.button)
                                
                                //calendar info.bubble tray.circle
                            }.onSubmit {
                                print("submit")
                            }.padding(5).foregroundStyle(Color.white).fontWeight(.bold).background(Color.black).clipShape(.buttonBorder)
                            //.padding(10).foregroundStyle(.foreground).background(.gray.opacity(0.3)).shadow(color:Color.appLightBlue,radius: 10).clipShape(.capsule)
                        }
                    }
                    Spacer()
                }
            }.navigationTitle("Search")
        }.searchable(text: $searchText)
    }
}

#Preview {
    SearchView()
}
